C51 COMPILER V9.01   UAR                                                                   03/21/2020 16:18:30 PAGE 1   


C51 COMPILER V9.01, COMPILATION OF MODULE UAR
OBJECT MODULE PLACED IN uar.OBJ
COMPILER INVOKED BY: E:\KEIL\C51\BIN\C51.EXE uar.c RTX51 BROWSE DEBUG OBJECTEXTEND

line level    source

   1          #include<reg52.h>
   2          #include"lcd.h"
   3          #include"uart.h"
   4          
   5          
   6          void uart_init()
   7          {
   8   1              SCON=0x40;
   9   1              PCON = 0X00;                            //²¨ÌØÂÊ²»¼Ó±¶
  10   1              REN=1;                                          //·¢ËÍ½ÓÊÕÊÇÄÜ
  11   1              T2MOD = 0X01;
  12   1              T2CON = 0X30;                           //ÉèÖÃT2Î»²¨ÌØÂÊÊ±ÖÓ
  13   1              RCAP2H = 0xff;                          //65536-11059200/32¡Á9600
  14   1              RCAP2L = 0xdc;                          //³õÊ¼»¯¼ÆÊýÖµ 11.0592Mhz 9600²¨ÌØÂÊ
  15   1              TH2 = 0xff;                                     //³õÊ¼»¯¼ÆÊýÖµ 11.0592Mhz 9600²¨ÌØÂÊ
  16   1              TL2 = 0xdc;                               
  17   1              SM0=0;                                          //´®¿ÚÄ£Ê½8ÎªÊý¾ÝÎª£¬1Î»Í£Ö¹Î»
  18   1              SM1=1;                                          //´®¿ÚÄ£Ê½8ÎªÊý¾ÝÎª£¬1Î»Í£Ö¹Î»
  19   1              TR2=1;                                          //¶¨Ê±Æ÷2¿ªÊ¼¼ÆÊý
  20   1              TI=0;                                           //Çå³ýÖÐ¶Ï±êÖ¾Î»
  21   1      }
  22          
  23          
  24          
  25          void send_char(uchar dat)               //·¢ËÍÒ»¸ö×Ö½ÚÊý¾Ý
  26          {
  27   1              SBUF=dat;
  28   1              while(!TI);
  29   1              TI=0;
  30   1      }
  31          void send_string(uchar *da)             //·¢ËÍ×Ö·û´®Êý¾Ý
  32          {
  33   1              while(*da!='\0')
  34   1              {
  35   2                      send_char(*da);
  36   2                      da++;
  37   2              }
  38   1      }
  39          
  40          void send_num(uint *num)                 //·¢ËÍ²âÁ¿Êý¾Ý£¬Ã¿¸öÊý¾Ý×î¶àÁ½¸ö×Ö½Ú£¬¸ß×Ö½ÚÔÚÇ°µÍ×Ö½ÚÔÚºó£¬¹²´«Êä10¸ö×Ö½Ú£¬×îº
             -óÁ½¸ö×Ö½ÚÎª0d0a½áÊøÖ¡
  41          {
  42   1              int i;
  43   1              uchar tab[10] = {0};
  44   1              
  45   1              for(i=0 ; i < 4; i++)
  46   1              {
  47   2                      tab[2 * i + 0] = (num[i] & 0xff00) >> 8;
  48   2                      tab[2 * i + 1] = (num[i] & 0x00ff);
  49   2              }
  50   1              tab[8] = 0x0d;
  51   1              tab[9] = 0x0a;
  52   1               
  53   1              for(i=0;i<10;i++)
  54   1              {
C51 COMPILER V9.01   UAR                                                                   03/21/2020 16:18:30 PAGE 2   

  55   2                      send_char(tab[i]);
  56   2              }
  57   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    183    ----
   CONSTANT SIZE    =     10    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----      13
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
